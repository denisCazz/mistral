---
import Layout from '../layouts/MainLayout.astro';

const progetti = [
  {
    titolo: "Casa di Cura Città di Bra",
    cliente: "Casa di Cura Città di Bra",
    tipologie: [
      "Impianti antincendio",
      "Sale operatorie",
      "Impianti elettrici",
      "Fibra ottica"
    ],
    descrizione: "Installazione e manutenzione di impianti specializzati per strutture sanitarie.",
    immagine: "/bra.jpg"
  },
  {
    titolo: "Siemens",
    cliente: "Siemens",
    tipologie: [
      "Manutenzione",
      "BMS",
      "TVCC",
      "Antintrusione",
      "Impianti antincendio"
    ],
    descrizione: "Collaborazione con Siemens per l'implementazione di soluzioni tecnologiche avanzate.",
    immagine: "/siemens.jpg"
  },
  {
    titolo: "Amazon",
    cliente: "Amazon",
    tipologie: [
      "Poli logistici in tutta Italia",
      "Impianti antincendio",
      "BMS",
      "Collaudi"
    ],
    descrizione: "Installazione di sistemi complessi per centri logistici in tutta Italia.",
    immagine: "/Amazon.png"
  },
  {
    titolo: "Abet",
    cliente: "Abet",
    tipologie: [
      "Impianti rivelazione fumi",
      "Impianti rivelazione gas",
      "Impianti di evacuazione"
    ],
    descrizione: "Sistemi di sicurezza e rilevazione per ambienti industriali.",
    immagine: "/abet.png"
  },
  {
    titolo: "Rivoli",
    cliente: "Rivoli",
    tipologie: [
      "Impianti antincendio",
      "EVAC"
    ],
    descrizione: "Sistemi di sicurezza e evacuazione per edifici pubblici.",
    immagine: "/rivoli.jpg"
  },
  {
    titolo: "Profilmec",
    cliente: "Profilmec",
    tipologie: [
      "Impianti rivelazione fumi",
      "Impianti rivelazione gas",
      "Impianti di evacuazione"
    ],
    descrizione: "Installazione di sistemi di sicurezza per impianti industriali.",
    immagine: "/profilmec.jpg"
  },
  {
    titolo: "Nedap",
    cliente: "Nedap",
    tipologie: [
      "Impianti antitaccheggio"
    ],
    descrizione: "Soluzioni antitaccheggio per il settore retail.",
    immagine: "/nedap.jpg"
  },
  {
    titolo: "Riva",
    cliente: "Riva",
    tipologie: [
      "Impianti antincendio"
    ],
    descrizione: "Installazione e manutenzione di impianti antincendio.",
    immagine: "/riva.jpg"
  },
  {
    titolo: "Qmatic",
    cliente: "Qmatic",
    tipologie: [
      "Impianti eliminacode"
    ],
    descrizione: "Sistemi di gestione code per uffici pubblici e privati.",
    immagine: "/qmatic.jpg"
  },
  {
    titolo: "RS Service Srl",
    cliente: "RS Service Srl",
    tipologie: [],
    descrizione: "",
    immagine: "/rsservice.png"
  },
  {
    titolo: "ACI Progei",
    cliente: "ACI Progei",
    tipologie: [],
    descrizione: "",
    immagine: "/aci.webp"
  },
  {
    titolo: "Juventus",
    cliente: "Juventus",
    tipologie: [],
    descrizione: "",
    immagine: "/juve.webp"
  },
  {
    titolo: "Sinelec",
    cliente: "Sinelec",
    tipologie: [],
    descrizione: "",
    immagine: "/sinelec.png"
  },
  {
    titolo: "Casa di Cura Sant'Anna",
    cliente: "Casa di Cura Sant'Anna",
    tipologie: [],
    descrizione: "",
    immagine: "/santanna.jpg"
  },
  {
    titolo: "Eviso",
    cliente: "Eviso",
    tipologie: [],
    descrizione: "",
    immagine: "/eviso.png"
  },
  {
    titolo: "Iris IT",
    cliente: "Iris IT",
    tipologie: [],
    descrizione: "",
    immagine: "/iris.webp"
  },
  {
    titolo: "Inalpi Arena",
    cliente: "Inalpi Arena",
    tipologie: [],
    descrizione: "",
    immagine: "/inalpi.png"
  },
  {
    titolo: "Palavela",
    cliente: "Palavela",
    tipologie: [],
    descrizione: "",
    immagine: "/palavela.png"
  },
  {
    titolo: "Diageo",
    cliente: "Diageo",
    tipologie: [],
    descrizione: "",
    immagine: "/diageo.svg"
  },
  {
    titolo: "Riva",
    cliente: "Riva",
    tipologie: [],
    descrizione: "",
    immagine: "/riva.webp"
  },
  {
    titolo: "Abet Laminati",
    cliente: "Abet Laminati",
    tipologie: [],
    descrizione: "",
    immagine: "/abet.webp"
  },
  {
    titolo: "Mondovicino",
    cliente: "Mondovicino",
    tipologie: [],
    descrizione: "",
    immagine: "/mondovicino.png"
  },
  {
    titolo: "Le Terrazze",
    cliente: "Le Terrazze",
    tipologie: [],
    descrizione: "",
    immagine: "/leterrazze.png"
  },
  {
    titolo: "Stellantis",
    cliente: "Stellantis",
    tipologie: [],
    descrizione: "",
    immagine: "/stellantis.webp"
  },
  {
    titolo: "Bitron",
    cliente: "Bitron",
    tipologie: [],
    descrizione: "",
    immagine: "/bitron.webp"
  },
  {
    titolo: "Levosil",
    cliente: "Levosil",
    tipologie: [],
    descrizione: "",
    immagine: "/levosil.png"
  },
  {
    titolo: "Geodis",
    cliente: "Geodis",
    tipologie: [],
    descrizione: "",
    immagine: "/geodis.svg"
  },
  {
    titolo: "Lavazza",
    cliente: "Lavazza",
    tipologie: [],
    descrizione: "",
    immagine: "/lavazza.webp"
  },
  {
    titolo: "Bulgari",
    cliente: "Bulgari",
    tipologie: [],
    descrizione: "",
    immagine: "/bulgari.webp"
  },
  {
    titolo: "Starhotels",
    cliente: "Starhotels",
    tipologie: [],
    descrizione: "",
    immagine: "/starhotels.svg"
  },
  {
    titolo: "Luxottica",
    cliente: "Luxottica",
    tipologie: [],
    descrizione: "",
    immagine: "/luxottica.webp"
  },
  {
    titolo: "Seven (7even)",
    cliente: "Seven (7even)",
    tipologie: [],
    descrizione: "",
    immagine: "/seven.png"
  },
  {
    titolo: "IVECO",
    cliente: "IVECO",
    tipologie: [],
    descrizione: "",
    immagine: "/iveco.svg"
  },
  {
    titolo: "Italdesign",
    cliente: "Italdesign",
    tipologie: [],
    descrizione: "",
    immagine: "/Italdesign.webp"
  },
  {
    titolo: "Ferrero",
    cliente: "Ferrero",
    tipologie: [],
    descrizione: "",
    immagine: "/ferrero.png"
  },
  {
    titolo: "Conad",
    cliente: "Conad",
    tipologie: [],
    descrizione: "",
    immagine: "/Conad.png"
  },
  {
    titolo: "Esselunga",
    cliente: "Esselunga",
    tipologie: [],
    descrizione: "",
    immagine: "/esselunga.png"
  },
  {
    titolo: "Cogne",
    cliente: "Cogne",
    tipologie: [],
    descrizione: "",
    immagine: "/cogne.png"
  },
  {
    titolo: "Vetropack",
    cliente: "Vetropack",
    tipologie: [],
    descrizione: "",
    immagine: "/vetropack.png"
  },
  {
    titolo: "DentalPro",
    cliente: "DentalPro",
    tipologie: [],
    descrizione: "",
    immagine: "/dentalpro.png"
  },
  {
    titolo: "Istituto di Candiolo",
    cliente: "Istituto di Candiolo",
    tipologie: [],
    descrizione: "",
    immagine: "/candiolo.jpg"
  },
  {
    titolo: "Caffarel",
    cliente: "Caffarel",
    tipologie: [],
    descrizione: "",
    immagine: "/Caffarel.png"
  },
  {
    titolo: "Leroy Merlin",
    cliente: "Leroy Merlin",
    tipologie: [],
    descrizione: "",
    immagine: "/leroyMerlin.png"
  },
  {
    titolo: "Castello di Rivoli",
    cliente: "Castello di Rivoli",
    tipologie: [],
    descrizione: "",
    immagine: "/castellorivoli.jpg"
  },
  {
    titolo: "Carrefour Algeco",
    cliente: "Carrefour Algeco",
    tipologie: [],
    descrizione: "",
    immagine: "/carrefour.jpg"
  },
  {
    titolo: "Università di Torino",
    cliente: "Università di Torino",
    tipologie: [],
    descrizione: "",
    immagine: "/unito.png"
  },
  {
    titolo: "Carglass",
    cliente: "Carglass",
    tipologie: [],
    descrizione: "",
    immagine: "/carglass.jpg"
  },
  {
    titolo: "RAI",
    cliente: "RAI",
    tipologie: [],
    descrizione: "",
    immagine: "/rai.jpg"
  },
  {
    titolo: "Gaja",
    cliente: "Gaja",
    tipologie: [],
    descrizione: "",
    immagine: "/gaja.jpg"
  },
  {
    titolo: "Fontanafredda",
    cliente: "Fontanafredda",
    tipologie: [],
    descrizione: "",
    immagine: "/fontanafredda.png"
  },
  {
    titolo: "Teatro Regio",
    cliente: "Teatro Regio",
    tipologie: [],
    descrizione: "",
    immagine: "/teatroregio.png"
  },
  {
    titolo: "Waterfront",
    cliente: "Waterfront",
    tipologie: [],
    descrizione: "",
    immagine: "/waterfront.png"
  }
];
---

<Layout title="I nostri lavori | Mistral Impianti">
  <style>
    .tag {
      display: inline-block;
      background-color: #e2f0fd;
      color: #3182ce;
      border-radius: 9999px;
      padding: 0.25rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 500;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
      border: 1px solid #bee3f8;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .card {
      transition: all 0.3s ease;
    }
    
    .imgCarte {
      height: 160px;
      object-fit: contain;
      padding: 15px;
    }
    
    .tipologie-container {
      display: flex;
      flex-wrap: wrap;
      margin-top: 0.75rem;
    }

    .collapsible-summary {
      cursor: pointer;
      font-weight: 700;
      font-size: 1.35rem;
      padding: 1.25rem 0;
      outline: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      background: #fff;
      color: #111;
      border-radius: 1rem;
      border: 2px solid #111;
      box-shadow: 0 2px 12px 0 rgba(0,0,0,0.04);
      transition: background 0.2s, color 0.2s, border 0.2s;
      user-select: none;
    }
    .collapsible-summary:hover, .collapsible-summary:focus {
      background: #111;
      color: #fff;
      border-color: #111;
    }
    .collapsible-arrow {
      transition: transform 0.3s cubic-bezier(.4,2,.6,1), background 0.2s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.2rem;
      height: 2.2rem;
      border-radius: 50%;
      background: #111;
    }
    .collapsible-arrow svg {
      display: block;
      width: 1.2rem;
      height: 1.2rem;
      color: #fff;
      transition: color 0.2s;
    }
    details[open] .collapsible-arrow {
      transform: rotate(90deg);
      background: #fff;
    }
    details[open] .collapsible-arrow svg {
      color: #111;
    }
    details {
      margin-bottom: 2.5rem;
    }
  </style>

  <main class="container mx-auto px-4 py-12">
    <h1 class="text-3xl md:text-4xl font-bold mb-8 text-center">I nostri lavori</h1>
    
    <p class="text-lg text-center max-w-3xl mx-auto mb-12">
      Scopri alcuni dei progetti realizzati da Mistral Impianti negli ultimi anni.
      La nostra esperienza e competenza al servizio dei clienti.
    </p>
    
    <details id="lavori-details" open>
      <summary class="collapsible-summary">
        <span class="collapsible-arrow">
          <svg viewBox="0 0 20 20" fill="none">
            <path d="M7 5l6 5-6 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span id="collapsible-text">Nascondi lista lavori</span>
      </summary>
      <br />
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
        {progetti.map(progetto => (
          <div class="border rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow card">
            <div class="card-header bg-white">
              <img src={progetto.immagine} alt={progetto.titolo} class="imgCarte mx-auto" onerror="this.src='/placeholder-project.jpg'; this.onerror=null;" />
            </div>
            <div class="p-6 card-body">
              <h2 class="text-xl font-semibold mb-2">{progetto.titolo}</h2>
              <p class="text-sm text-gray-600 mb-3">
                Cliente: {progetto.cliente}
              </p>
              <p class="mb-2">{progetto.descrizione}</p>
              
              {/* Mostra la sezione solo se ci sono tipologie */}
              {progetto.tipologie && progetto.tipologie.length > 0 && (
                <div class="mt-4">
                  <h3 class="text-sm font-medium text-gray-700 mb-2">Tipologia lavori:</h3>
                  <div class="tipologie-container">
                    {progetto.tipologie.map((tipo) => (
                      <span class="tag">{tipo}</span>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>
        ))}
      </div>
    </details>
    
    <!-- Sezione Mistral Counter -->
    <section class="py-12 bg-gradient-to-br from-gray-50 via-white to-gray-100 rounded-2xl shadow-lg mb-16">
      <div class="container mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center text-gray-900 tracking-tight">Mistral Counter</h2>
        <div class="flex flex-col md:flex-row items-center gap-10 md:gap-16">
          <div class="w-full md:w-1/2 flex flex-col items-center md:items-start mb-8 md:mb-0">
            <div class="flex items-center justify-center mb-6">
              <span class="inline-flex items-center justify-center rounded-full bg-black text-white w-16 h-16 shadow-lg">
                <!-- Icona contatore/tecnologia -->
                <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <rect x="4" y="4" width="16" height="16" rx="4" stroke-width="2"/>
                  <path d="M8 12h8M12 8v8" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </span>
            </div>
            <h3 class="text-2xl font-semibold mb-3 text-gray-800 text-center md:text-left">Innovazione e tecnologia</h3>
            <p class="mb-6 text-gray-600 text-center md:text-left">
              Il Mistral Counter rappresenta la nostra soluzione all'avanguardia per il monitoraggio e la gestione intelligente degli impianti.<br>
              Scopri come questa tecnologia può ottimizzare i consumi e migliorare l'efficienza energetica.
            </p>
            <ul class="space-y-3 text-gray-700 text-base">
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Monitoraggio in tempo reale dei consumi
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Analisi intelligente dei dati energetici
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Ottimizzazione automatica dei parametri
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Interfaccia semplice e intuitiva
              </li>
            </ul>
          </div>
          <div class="w-full md:w-1/2 flex flex-col items-center">
            <div class="flex flex-wrap gap-4 justify-center">
              <a 
                href="/pdf/MistralCounter.pdf" 
                class="inline-flex items-center px-6 py-3 bg-black text-white font-medium rounded-lg shadow hover:bg-gray-800 transition-all duration-300 transform hover:-translate-y-1"
                download
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
                Scarica la brochure
              </a>
              <a 
                href="/pdf/MistralCounter.pdf" 
                class="inline-flex items-center px-6 py-3 bg-white text-black font-medium rounded-lg shadow border-2 border-black hover:bg-gray-100 transition-all duration-300 transform hover:-translate-y-1"
                target="_blank"
              >
                Visualizza sul browser
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
    
  </main>
  <button 
    id="scrollToTopBtn"
    aria-label="Torna su"
    style="
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      z-index: 50;
      background: #111;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 3.5rem;
      height: 3.5rem;
      box-shadow: 0 2px 12px 0 rgba(0,0,0,0.12);
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      transition: background 0.2s;
    "
  >
    ↑
  </button>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const details = document.getElementById('lavori-details') as HTMLDetailsElement | null;
    const text = document.getElementById('collapsible-text');
    if (details && text) {
      function updateText() {
        if(text){
          if(details){
            if(details.open){
              text.textContent = 'Nascondi lista lavori';
            }else{
              text.textContent = 'Mostra lista lavori';
            }
          }
        }
      }
      details.addEventListener('toggle', updateText);
      updateText();
    }
    // Scroll to top button logic
    const scrollBtn = document.getElementById('scrollToTopBtn');
    window.addEventListener('scroll', function() {
      if (window.scrollY > 300) {
        if(scrollBtn){
          scrollBtn.style.display = 'flex';
        }
      } else {
        if(scrollBtn){
          scrollBtn.style.display = 'none';
        }
      }
    });
    scrollBtn?.addEventListener('click', function() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  });
</script>
