---
import MainLayout from '../layouts/MainLayout.astro';
---

<MainLayout
  title="Mistral Impianti S.R.L. | Soluzioni impiantistiche tecnologiche"
  description="Mistral Impianti S.R.L. offre soluzioni innovative e personalizzate per impianti elettrici, speciali, climatizzazione, antincendio e ristrutturazioni."
>
  <div itemscope itemtype="https://schema.org/Organization">
    <meta itemprop="name" content="Mistral Impianti SRL" />
    <meta itemprop="url" content="https://mistralimpianti.it/" />
    <meta itemprop="logo" content="https://mistralimpianti.it/logo.jpg" />
    <meta itemprop="description" content="Mistral Impianti S.R.L. offre soluzioni innovative e personalizzate per impianti elettrici, speciali, climatizzazione, antincendio e ristrutturazioni."/>
    <address itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
      <meta itemprop="streetAddress" content="Via dei Boschi, 3" />
      <meta itemprop="addressLocality" content="Piobesi Torinese" />
      <meta itemprop="postalCode" content="10040" />
      <meta itemprop="addressRegion" content="TO" />
      <meta itemprop="addressCountry" content="IT" />
    </address>
    <meta itemprop="telephone" content="+390119657370" />
    <meta itemprop="email" content="info@mistralimpianti.it" />
  </div>
  <header class="relative isolate overflow-hidden bg-black text-white" aria-label="Hero">
    <div class="absolute inset-0">
      <div class="absolute inset-0 pointer-events-none">
        <div class="floating-circles relative h-full w-full">
          <span class="absolute -left-10 top-16 h-40 w-40 rounded-full bg-cyan-400/15 blur-2xl sm:h-56 sm:w-56 float-a" style="animation-delay:0s"></span>
          <span class="absolute right-[-30px] top-24 h-48 w-48 rounded-full bg-violet-400/15 blur-2xl sm:h-64 sm:w-64 float-b" style="animation-delay:2.5s"></span>
          <span class="absolute left-1/3 -bottom-10 h-44 w-44 rounded-full bg-emerald-400/15 blur-2xl sm:h-56 sm:w-56 float-c" style="animation-delay:1.2s"></span>
        </div>
      </div>
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.12),_transparent_60%)]"></div>
      <div class="absolute -left-24 top-1/2 h-72 w-72 -translate-y-1/2 rounded-full border border-white/10"></div>
    </div>
    <div class="relative mx-auto flex max-w-6xl flex-col gap-16 px-4 pb-24 pt-52 md:flex-row md:items-center">
      <div class="max-w-2xl space-y-8">
        <p class="inline-flex items-center gap-2 rounded-full border border-white/20 px-4 py-2 text-xs uppercase tracking-[0.3em] text-white/70">Dal 1988</p>
        <h1 class="text-4xl font-semibold leading-tight sm:text-5xl md:text-6xl">
          Mistral Impianti S.R.L.
          <span class="block text-white/70">Soluzioni impiantistiche tecnologiche dal 1988</span>
        </h1>
        <p class="max-w-xl text-lg text-white/80">
          Progettiamo, installiamo e manteniamo impianti elettrici, speciali e antincendio per aziende che richiedono continuit√† operativa e standard qualitativi elevati.
        </p>
        <div class="flex flex-wrap gap-3">
          <a href="/servizi" class="inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-black shadow-lg shadow-black/30 transition hover:bg-white/80" title="Scopri i servizi">
            Scopri i servizi
          </a>
          <a href="/contatti" class="inline-flex items-center justify-center rounded-full border border-white/30 px-6 py-3 text-sm font-semibold text-white transition hover:bg-white/10" title="Parla con il team">
            Parla con il team
          </a>
        </div>
      </div>
      <div class="grid flex-1 gap-6 sm:grid-cols-2">
        <div class="group rounded-2xl border border-white/10 bg-white/10 p-6 backdrop-blur-md transition-all hover:border-white/20 hover:bg-white/15 shadow-[0_12px_30px_-10px_rgba(0,0,0,0.6)]">
          <div class="flex items-center gap-3 mb-4">
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-white/20 text-2xl shadow-sm ring-1 ring-white/20">üë•</span>
            <p class="text-sm font-bold uppercase tracking-[0.2em] text-white drop-shadow-sm">Persone</p>
          </div>
          <div class="flex flex-wrap items-baseline gap-2">
            <span class="text-5xl font-bold leading-none text-white drop-shadow-md">18</span>
            <span class="text-lg font-semibold text-white drop-shadow-sm">professionisti</span>
          </div>
          <p class="mt-4 text-sm font-semibold leading-relaxed text-white drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]">Tecnici specializzati, programmatori e installatori con formazione continua.</p>
        </div>
        <div class="group rounded-2xl border border-white/10 bg-white/10 p-6 backdrop-blur-md transition-all hover:border-white/20 hover:bg-white/15 shadow-[0_12px_30px_-10px_rgba(0,0,0,0.6)]">
          <div class="flex items-center gap-3 mb-4">
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-white/20 text-2xl shadow-sm ring-1 ring-white/20">üèÜ</span>
            <p class="text-sm font-bold uppercase tracking-[0.2em] text-white drop-shadow-sm">Qualit√†</p>
          </div>
          <p class="text-5xl font-bold text-white drop-shadow-md">ISO<br /><span class="text-4xl">9001</span></p>
          <p class="mt-4 text-sm font-semibold leading-relaxed text-white drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]">Certificazione del sistema di gestione per garantire processi tracciabili.</p>
        </div>
        <div class="group rounded-2xl border border-white/10 bg-white/10 p-6 backdrop-blur-md transition-all hover:border-white/20 hover:bg-white/15 shadow-[0_12px_30px_-10px_rgba(0,0,0,0.6)] sm:col-span-2">
          <div class="flex items-center gap-3 mb-4">
            <span class="flex h-12 w-12 items-center justify-center rounded-xl bg-white/20 text-2xl shadow-sm ring-1 ring-white/20">ü§ù</span>
            <p class="text-sm font-bold uppercase tracking-[0.2em] text-white drop-shadow-sm">Partnership</p>
          </div>
          <p class="text-lg font-bold leading-relaxed text-white drop-shadow-[0_2px_8px_rgba(0,0,0,0.8)]">Technical partner Siemens da oltre vent'anni con progetti in Italia e all'estero.</p>
        </div>
      </div>
    </div>
  </header>

  <section class="relative z-10 -mt-16 mb-24 px-4">
    <div class="mx-auto grid max-w-6xl gap-8 rounded-[2.5rem] border border-black/10 bg-white p-8 shadow-[0_40px_80px_-60px_rgba(0,0,0,0.8)] md:grid-cols-[1.1fr_0.9fr] md:p-12">
      <article aria-labelledby="storia-title" class="space-y-6 text-base text-zinc-700">
        <h2 id="storia-title" class="text-3xl font-semibold text-black">La nostra storia</h2>
        <p><strong>La MISTRAL IMPIANTI Srl</strong> opera da <em>pi√π di 30 anni</em> nel settore dell'impiantistica tecnologica e speciale. Ha iniziato la propria attivit√† nel <strong>1988</strong>. Nel <strong>2001</strong> la ditta ha scelto di concentrarsi nel ramo impiantistico.</p>
        <p>Ad oggi vantiamo un organico di <strong>18 risorse</strong>, tra cui tecnici specializzati, programmatori ed installatori. La nostra nuova sede legale ed operativa √® situata in <strong>Via del Lavoro n.17 a Cherasco</strong>, in provincia di Cuneo. L'azienda √® in possesso della <strong>certificazione ISO 9001</strong>.</p>
        <p>Col passare degli anni, visto l'ottimo livello dei servizi prestati ed il conseguente aumento della quota di mercato acquisita, √® maturata la decisione di specializzarsi anche in <strong>fornitura e manutenzione di impianti antincendio</strong>.</p>
        <p>In questa evoluzione ed espansione abbiamo comunque <em>gelosamente conservato le nostre radici artigiane</em>, esaltandone la <strong>flessibilit√†</strong>, la <strong>disponibilit√†</strong> e la <strong>competenza</strong> che rappresentano per noi il punto di forza.</p>
        <p>Attualmente, grazie al costante impegno nel prestare servizi di <strong>alta qualit√†</strong> e alla collaborazione con le maggiori aziende produttrici, leader nei vari settori, la Mistral Impianti pu√≤ vantare un <strong>parco clienti solido</strong> di carattere non solo nazionale, bens√¨ mondiale.</p>
        <p>La Mistral Impianti √® anche <strong>technical partner Siemens</strong>, avendo intrapreso una collaborazione ormai ventennale.</p>
      </article>
      <aside class="space-y-6">
        <div class="rounded-2xl border border-black/5 bg-black px-6 py-8 text-white">
          <h3 class="text-sm uppercase tracking-[0.3em] text-white/60">Linea del tempo</h3>
          <ul class="mt-6 space-y-6 text-sm text-white/80">
            <li class="flex gap-4">
              <span class="mt-1 h-2 w-2 rounded-full bg-white"></span>
              <div>
                <p class="text-xs uppercase tracking-[0.3em] text-white/60">1988</p>
                <p class="mt-1 font-medium text-white">Nasce Mistral Impianti nel settore impiantistico tecnologico.</p>
              </div>
            </li>
            <li class="flex gap-4">
              <span class="mt-1 h-2 w-2 rounded-full bg-white"></span>
              <div>
                <p class="text-xs uppercase tracking-[0.3em] text-white/60">2001</p>
                <p class="mt-1 font-medium text-white">Focus dedicato agli impianti tecnologici e speciali.</p>
              </div>
            </li>
            <li class="flex gap-4">
              <span class="mt-1 h-2 w-2 rounded-full bg-white"></span>
              <div>
                <p class="text-xs uppercase tracking-[0.3em] text-white/60">Oggi</p>
                <p class="mt-1 font-medium text-white">Servizi integrati per clienti nazionali e internazionali.</p>
              </div>
            </li>
          </ul>
        </div>
        <div class="rounded-2xl border border-black/5 bg-white px-6 py-6 shadow-sm">
          <h3 class="text-sm uppercase tracking-[0.3em] text-black/60">Punti di forza</h3>
          <p class="mt-4 text-sm text-zinc-700">Flessibilit√†, disponibilit√† e competenza artigiana per rispondere a esigenze complesse.</p>
        </div>
      </aside>
    </div>
  </section>

  <section class="mb-24 px-4" aria-labelledby="valori-title">
    <div class="mx-auto max-w-6xl rounded-[2.5rem] border border-black/10 bg-white px-6 py-12 shadow-[0_40px_80px_-60px_rgba(0,0,0,0.65)] md:px-16 md:py-16">
      <div class="grid gap-12 lg:grid-cols-[0.9fr_1.1fr] lg:items-center">
        <div class="space-y-6 text-zinc-700">
          <h2 id="valori-title" class="text-3xl font-semibold text-black">I valori che guidano ogni progetto</h2>
          <p class="text-sm text-zinc-600">Ogni attivit√† √® sostenuta da processi standardizzati e controlli continui per assicurare rapidit√† di intervento, continuit√† e affidabilit√† operativa.</p>
          <ul class="space-y-4 text-sm">
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-black"></span><span>Problem solving orientato alla professionalit√† e alla continuit√†.</span></li>
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-black"></span><span>Flessibilit√†, collaborazione e competitivit√† su ogni commessa.</span></li>
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-black"></span><span>Esperienza e versatilit√† maturate in diversi settori industriali.</span></li>
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-black"></span><span>Personale altamente qualificato e formato.</span></li>
            <li class="flex gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-black"></span><span>Pronta disponibilit√† di materiali e ricambi.</span></li>
          </ul>
        </div>
        <div class="relative">
          <div class="rounded-[2rem] border border-black/10 bg-zinc-900 px-6 py-6 shadow-[0_30px_60px_-45px_rgba(0,0,0,0.65)]">
            <div class="flex items-center justify-between px-2">
              <p class="text-sm uppercase tracking-[0.3em] text-white/60">Valori</p>
              <p class="text-xs text-white/40">Distribuzione 1:1</p>
            </div>
            <p class="mt-2 px-2 text-xs font-semibold text-white/80">5 valori</p>
            <div class="relative mt-6">
              <div class="rounded-2xl border border-white/10 bg-black/30 p-4">
                <canvas id="mistralValuesChart" class="h-[280px] w-full sm:h-[320px]" aria-label="Valori aziendali Mistral" role="img"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="px-4 pb-24" aria-label="Call to action">
    <div class="mx-auto max-w-6xl overflow-hidden rounded-[2.5rem] border border-black/10 bg-black text-white">
      <div class="grid gap-8 px-8 py-14 md:grid-cols-[1.1fr_0.9fr] md:px-16">
        <div class="space-y-4">
          <p class="text-xs uppercase tracking-[0.3em] text-white/50">Parliamo del prossimo progetto</p>
          <h2 class="text-3xl font-semibold text-white">Dal concept alla manutenzione, un unico partner tecnologico.</h2>
          <p class="text-sm text-white/70">Dalla progettazione alle verifiche periodiche, coordiniamo team multidisciplinari per impianti elettrici, speciali, antincendio e sistemi intelligenti.</p>
        </div>
        <div class="flex flex-col justify-end gap-4 md:items-end">
          <a href="/contatti" class="inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-black shadow-lg shadow-black/30 transition hover:bg-white/80" title="Contattaci">
            Contattaci ora
          </a>
          <p class="text-xs uppercase tracking-[0.3em] text-white/50">Via del Lavoro 17 ¬∑ Cherasco (CN)</p>
        </div>
      </div>
    </div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.js"></script>
  
  <script>
  // @ts-ignore: Chart e ChartDataLabels sono globali caricati da CDN
  declare const Chart: any;
  // @ts-ignore: ChartDataLabels √® globale da CDN
  interface Window { ChartDataLabels: any }

    document.addEventListener('DOMContentLoaded', () => {
      // @ts-ignore
      if (window.ChartDataLabels) {
        // @ts-ignore
        Chart.register(window.ChartDataLabels);
      }

      // Rimosso testo centrale: mostrato ora come label sopra il grafico
      const canvas = document.getElementById('mistralValuesChart') as HTMLCanvasElement | null;
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      if (!ctx) return;

      // Qualit√† chiave per datalabels abbreviate
      const shortLabels = [
        'Problem solving',
        'Flessibilit√†',
        'Esperienza',
        'Personale',
        'Disponibilit√†'
      ];

      const data = {
        labels: [
          'Problem solving: professionalit√† e continuit√†',
          'Flessibilit√†, collaborazione e competitivit√†',
          'Esperienza e versatilit√† in diversi settori',
          'Personale altamente qualificato',
          'Pronta disponibilit√† materiale e ricambi'
        ],
        datasets: [{
          data: [1, 1, 1, 1, 1],
          // Palette vivida e leggibile su sfondo scuro
          backgroundColor: [
            'rgba(34, 211, 238, 0.9)',   // cyan-400
            'rgba(167, 139, 250, 0.9)', // violet-400
            'rgba(245, 158, 11, 0.9)',  // amber-500
            'rgba(16, 185, 129, 0.9)',  // emerald-500
            'rgba(244, 63, 94, 0.9)'    // rose-500
          ],
          borderColor: 'rgba(255,255,255,0.2)',
          borderWidth: 1.5,
          hoverOffset: 12,
          hoverBorderColor: 'rgba(255,255,255,0.35)'
        }]
      };

      function createConfig(isMobile: boolean) {
        if (isMobile) {
          // Mobile: grafico a barre orizzontali per massima leggibilit√†
          return {
            type: 'bar',
            data,
            options: {
              responsive: true,
              maintainAspectRatio: false,
              indexAxis: 'y',
              layout: { padding: { top: 8, right: 8, bottom: 8, left: 8 } },
              animation: { duration: 500, easing: 'easeOutQuad' },
              scales: {
                x: {
                  display: false,
                  grid: { display: false },
                  ticks: { display: false },
                  border: { display: false }
                },
                y: {
                  display: true,
                  grid: { color: 'rgba(255,255,255,0.08)', drawBorder: false },
                  ticks: {
                    color: '#ffffff',
                    font: { size: 12, weight: '600' },
                    callback: (val: any) => shortLabels[val as number] || ''
                  },
                  border: { display: false }
                }
              },
              plugins: {
                legend: { display: false },
                tooltip: {
                  callbacks: { label: (ctx: any) => ctx.label },
                  backgroundColor: 'rgba(17, 17, 17, 0.95)',
                  titleColor: '#fff',
                  bodyColor: '#fff',
                  borderColor: '#fff',
                  borderWidth: 1,
                  padding: 12,
                  titleFont: { size: 13, weight: '600' },
                  bodyFont: { size: 12 }
                },
                datalabels: {
                  display: true,
                  color: '#ffffff',
                  backgroundColor: 'rgba(0,0,0,0.55)',
                  borderRadius: 6,
                  padding: { top: 3, bottom: 3, left: 6, right: 6 },
                  anchor: 'end',
                  align: 'end',
                  clamp: true,
                  font: { weight: '700', size: 11 },
                  formatter: (_: unknown, ctx: { dataIndex: number }) => shortLabels[ctx.dataIndex]
                }
              }
            }
          };
        }
        // Desktop/Tablet: doughnut moderno
        return {
          type: 'doughnut',
          data,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '60%',
            layout: { padding: { top: 12, right: 12, bottom: 12, left: 12 } },
            animation: { duration: 800, easing: 'easeOutQuart' },
            plugins: {
              legend: {
                display: true,
                position: 'bottom',
                labels: {
                  usePointStyle: true,
                  pointStyle: 'circle',
                  font: { size: 13, weight: '600' },
                  color: '#ffffff',
                  padding: 14,
                  boxWidth: 10
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context: any) {
                    return context.label;
                  }
                },
                backgroundColor: 'rgba(17, 17, 17, 0.95)',
                titleColor: '#fff',
                bodyColor: '#fff',
                borderColor: '#fff',
                borderWidth: 1,
                padding: 14,
                titleFont: { size: 14, weight: '600' },
                bodyFont: { size: 13 }
              },
              datalabels: {
                color: '#ffffff',
                backgroundColor: 'rgba(0,0,0,0.55)',
                borderRadius: 6,
                padding: { top: 4, bottom: 4, left: 8, right: 8 },
                offset: 6,
                anchor: 'end',
                align: 'end',
                clamp: true,
                font: { weight: '700', size: 12 },
                formatter: (_: unknown, ctx: { dataIndex: number }) => shortLabels[ctx.dataIndex]
              }
            }
          }
        };
      }

      function setChartHeight() {
        const canvas = document.getElementById('mistralValuesChart') as HTMLCanvasElement | null;
        if (!canvas) return;
        if (window.innerWidth < 640) {
          canvas.height = 320; // pi√π spazio per 5 barre
        } else if (window.innerWidth < 768) {
          canvas.height = 360;
        } else {
          canvas.height = 420;
        }
      }
      setChartHeight();

      let lastIsMobile = window.innerWidth < 640;
      let mistralChart = new Chart(ctx, createConfig(lastIsMobile));

      function handleResize() {
        setChartHeight();
        const isMobile = window.innerWidth < 640;
        if (isMobile !== lastIsMobile) {
          // ricrea il grafico con il nuovo tipo
          mistralChart.destroy();
          mistralChart = new Chart(ctx, createConfig(isMobile));
          lastIsMobile = isMobile;
        } else {
          mistralChart.resize();
          mistralChart.update();
        }
      }

      window.addEventListener('resize', handleResize);
    });
  </script>
    <style>
      @keyframes floatA {
        0%, 100% { transform: translateY(0) translateX(0) scale(1); }
        50% { transform: translateY(-18px) translateX(6px) scale(1.04); }
      }
      @keyframes floatB {
        0%, 100% { transform: translateY(0) translateX(0) scale(1); }
        50% { transform: translateY(-10px) translateX(-10px) scale(1.03); }
      }
      @keyframes floatC {
        0%, 100% { transform: translateY(0) translateX(0) scale(1); }
        50% { transform: translateY(14px) translateX(8px) scale(1.02); }
      }
      .float-a { animation: floatA 10s ease-in-out infinite; }
      .float-b { animation: floatB 12s ease-in-out infinite; }
      .float-c { animation: floatC 9s ease-in-out infinite; }
      @media (prefers-reduced-motion: reduce) {
        .float-a, .float-b, .float-c { animation: none !important; }
      }
    </style>
</MainLayout>